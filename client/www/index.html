<!DOCTYPE html>
<html>
<title>Find My Buddy</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.js"></script> 
<script type="text/javascript" src="cordova.js"></script>
<script src="js/sammy.js" type="text/javascript" ></script>
<script src="js/handlebars-v3.0.1.js" type="text/javascript" ></script>

 <style type="text/css">
      html, body, #map-canvas { height:100vh; margin: 0; padding: 0;width: 100vh;}
    </style>
    <script src="https://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript">
     /* function initialize() {
        var mapOptions = {
          center: { lat: -34.397, lng: 150.644},
          zoom: 8
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
      }
      google.maps.event.addDomListener(window, 'load', initialize);*/


function initialize1(data) {
  alert(data);
  var arrayActivity = [];

  var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
  var mapOptions = {
    zoom: 4,
    center: myLatlng
  }
  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

for(var i in data){
 

  

  //{{#each data}}
    console.log('test');
   // var myLatlng = new google.maps.LatLng("{{lat}}","{{lng}}");
   var myLatlng = new google.maps.LatLng(data[i]['latitude'],data[i]['longitude']);
    var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title: data[i]['name']
  });
  //{{/each}}
//var myLatlng = new google.maps.LatLng(arrayActivity[i].lat,arrayActivity[i].lng);
  var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title: data[i]['name']
  });
  }
}

//google.maps.event.addDomListener(window, 'load', initialize);

    </script>
    
</head>
<body>
  <!--   INDEX  --> 
  <div data-role="page" id="index">
    <header data-role="header">
      
      <a href="#logout" data-theme="b" class="ui-btn-right">Odjava</a>
      <h1>Find My Buddy</h1>
    </header>
    <div data-role="content">
      <h3>Aktivnosti</h3>
      <p>Izberi aktivnost in se prijavi</p>
      <h3>PhoneGap-GoogleMaps-Plugin</h3>
      <a href="#login" data-direction="reverse">Login</a>
      <div id="map-canvas"></div>Mapa

    </div>
    <footer data-role="footer" class="ui-body-b">
      <div data-role="navbar">
        <ul>
          <li><a href="#index" data-direction="reverse">Dogodki</a></li>
          <li><a href="#my_activity" >Moji Dogodki</a></li>
          <li><a href="#content" data-rel="external">Prijave</a></li>
        </ul>
      </div>
    </footer>
  </div>
  <!--   END INDEX -->       
  <!--   LOGIN -->             
  <div data-role="page" id="login">
    <header data-role="header">
      <h1>Prijava</h1>
    </header>
    <div data-role="content">
      <form action="#/loginPOST" method="POST">
        <label for="text-1">Uporabnisko:</label>
        <input type="text" name="username" id="text-1" value="">
        <label for="text-3">Geslo</label>
        <input type="password" data-clear-btn="true" name="password" id="text-3" value="">
        <input type="submit" value="PRIJAVA">
      </form>
      </div>  
    </div>
  </div>
  <!--  END LOGIN -->   



  <!--   MY ACTIVITY -->   
  <div data-role="page" id="my_activity">
    <header data-role="header">
      <h1>My Activity</h1>
    </header>
    <div data-role="content" id="listview-content">
      <p>just some extra content as well.</p>
      <p>
        <div id="articleHandlebars" data-demo-html="true"></div>
      </p> 
      <p>I mean, you can <a data-rel="back" href="#index">go back</a> at any time.</p>
    </div>
    <div data-role="footer">
      <h4>Page Footer</h4>
    </div>
  </div>
  <!--   END MY ACTIVITY -->   



  <!--   INCLUDE SAMMY ROUTING -->   
  <script type="text/javascript" src="js/main.js"></script>

  <!-- TEMPLATE -->
<script id="articles-template" type="text/x-handlebars-template">
  <ul id="listv" data-role="listview" data-autodividers="true"  data-filter="true" data-inset="true">
    {{#entries}} 
    <li><a href="#" onClick="alert('{{name}}')">{{name}}</a></li>
    {{/entries}}
  </ul>
</script> 
<!-- TEMPLATE -->       

</body>
</html>